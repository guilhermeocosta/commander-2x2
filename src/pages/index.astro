---
import BaseLayout from '../components/BaseLayout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import Button from '../components/Button.astro';
import rawDecksData from '../data/decks.json';
import { DecksDataSchema } from '../schemas/deck';

BaseLayout;

const decksData = DecksDataSchema.parse(rawDecksData);
const items = decksData.decks
  .filter(deck => deck.image_url?.trim())
  .map(deck => ({ img: deck.image_url, url: deck.url, commander: deck.commanders.join(" / ") }));
---

<BaseLayout title="Commander 2x2 - Formato competitivo em duplas" description="Formato competitivo de Commander em duplas. Interações esperadas, jogo político irrelevante.">
  <Header />

  <main>
    <div class="hero bg-base-200">
      <div class="hero-content text-center px-4 py-32">
        <div class="max-w-md">
          <h1 class="text-3xl md:text-4xl font-bold text-primary">Faça parte do Commander 2x2</h1>
          <p class="py-6 text-base md:text-lg">
            Um novo formato de Commander competitivo em duplas acessível e com uma comunidade crescente de jogadores.
          </p>
          <Button href="/regras" variant="primary" size="lg" className="w-full md:w-auto">
            Conheça as Regras
          </Button>
        </div>
      </div>
    </div>

    <div class="pt-8">
      <div class="container mx-auto">
        <h2 class="text-2xl font-bold mb-4">Últimos decks</h2>
      </div>

      {items.length > 0 ? (
        <div class="overflow-hidden pt-2 w-full group">
          <div class="flex gap-2 animated-carousel">
            {items.map(({ url, img, commander }) => (
              <a href={url}>
                <img
                  class="h-72 transition-all duration-300 ease-out translate-y-16 hover:-translate-y-2 rounded-lg"
                  src={img}
                  alt={`Deck de ${commander}`}
                />
              </a>
            ))}

            {items.map(({ url, img, commander }) => (
              <a href={url}>
                <img
                  class="h-72 transition-all duration-300 ease-out translate-y-16 hover:-translate-y-2 rounded-lg"
                  src={img}
                  alt={`Deck de ${commander}`}
                />
              </a>
            ))}
          </div>
        </div>
      ) : (
        <div class="container mx-auto text-center py-8">
          <p class="text-base-content/70">Nenhum deck com imagem disponível no momento.</p>
        </div>
      )}
    </div>

    <div class="container mx-auto px-4 py-16">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <div class="card bg-base-100 shadow-xl">
          <div class="card-body">
            <h2 class="card-title text-primary">Formato Único</h2>
            <p>Experiência competitiva de Commander em duplas com regras balanceadas.</p>
          </div>
        </div>

        <div class="card bg-base-100 shadow-xl">
          <div class="card-body">
            <h2 class="card-title text-primary">Acessível</h2>
            <p>Estratégias diversas são capazes de fazer ótimos resultados.</p>
          </div>
        </div>

        <div class="card bg-base-100 shadow-xl">
          <div class="card-body">
            <h2 class="card-title text-primary">Comunidade</h2>
            <p>Eventos mensais e ambiente acolhedor para jogadores de todos os níveis.</p>
          </div>
        </div>
      </div>

      <div class="text-center mt-8">
        <Button href="/eventos">
          Veja os próximos eventos
        </Button>
      </div>
    </div>
  </main>

  <Footer />
</BaseLayout>
